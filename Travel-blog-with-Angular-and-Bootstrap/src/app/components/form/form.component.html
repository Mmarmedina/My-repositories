
<header>
    <h1 class="text-center my-5 fw-bold">Crear un nuevo post</h1>
</header> 

<section class="container w-50 mb-5">
    <form class="d-flex flex-column p-5" [formGroup]="form" (ngSubmit)="onSubmit()">
        <div class="field mb-3">
            <label class="d-block fw-bold mb-2" for="title">Título</label>
            <input class="mb-2 p-2 w-100" id="title" name="title" type="text" formControlName="title">
            <p class="error"
                *ngIf="form.get('title')?.hasError('required') && form.get('title')?.touched">Debes escribir el título del post (entre 25 y 130 caracteres).
            </p>
            <p class="error"
                *ngIf="form.get('title')?.hasError('minlength') && form.get('title')?.touched">Debes escribir el título del post (entre 25 y 130 caracteres).
            </p>
            <p class="error"
                *ngIf="form.get('title')?.hasError('maxlength') && form.get('title')?.touched">Debes escribir el título del post (entre 25 y 130 caracteres).
            </p>
        </div>
        <div class="field mb-3">
            <label class="fw-bold d-block mb-2" for="text">Texto del post</label>
            <input class="mb-2 p-2 w-100 height-input" id="text" name="text" type="textarea" formControlName="text">
            <p class="error"
                *ngIf="form.get('text')?.hasError('required') && form.get('text')?.touched">Debes escribir el contenido el post aquí (al menos 300 caracteres).
            </p>
            <p class="error"
                *ngIf="form.get('text')?.hasError('minlength') && form.get('text')?.touched">Debes escribir el contenido el post aquí (al menos 300 caracteres).
            </p>            
        </div>
        <div class="field mb-3">
            <label class="fw-bold d-block mb-2" for="excerpt">Resumen</label>
            <input class="mb-2 p-2 w-100" id="excerpt" name="excerpt" type="text" formControlName="excerpt">
        </div>        
        <div class="field mb-3">
            <label class="fw-bold d-block mb-2 w-25" for="author">Autor</label>
            <input class="mb-2 p-2 w-100" id="author" name="author" type="text" formControlName="author">
            <p class="error"
                *ngIf="form.get('author')?.hasError('required') && form.get('author')?.touched">Debes escribir el autor (entre 8 y 25 caracteres)
            </p>
            <p class="error"
                *ngIf="form.get('author')?.hasError('minlength') && form.get('author')?.touched">Debes escribir el autor (entre 8 y 25 caracteres)
            </p>
            <p class="error"
                *ngIf="form.get('author')?.hasError('maxlength') && form.get('author')?.touched">Debes escribir el autor (entre 8 y 25 caracteres)
            </p>
        </div>
        <div class="field mb-3">
            <label class="fw-bold d-block mb-2" for="img">URL imagen principal del post</label>
            <input class="mb-2 p-2 w-100" id="img" name="img" type="url" formControlName="img">
            <p class="error"
                *ngIf="form.get('img')?.hasError('required') && form.get('img')?.touched">Debes escribir la url de la imagen principal del post.
            </p>
            <p class="error"
                *ngIf="form.get('img')?.hasError('pattern') && form.get('img')?.touched">Formato URL incorrecto.
            </p>            
        </div>
        <div class="field mb-3">
            <label class="fw-bold d-block mb-2">Elige una categoría</label>
            <select class="mb-2 p-2" id="id-category" name="id-category" title="category-filter" formControlName="id_category">
                <option name="category.title" [value]="category.id" *ngFor="let category of arrCategories">{{category.title}}</option>
            </select>
            <p class="error"
                *ngIf="form.get('id_category')?.hasError('required') && form.get('id_category')?.touched">Escoge a qué categoría pertenece el post.
            </p>
        </div> 
        <div class="field mb-3">
            <label class="fw-bold d-block mb-2" for="img">Fecha de publicación</label>
            <input class="mb-2 p-2" id="date" name="date" type="date" formControlName="date">
            <p class="error"
                *ngIf="form.get('date')?.hasError('required') && form.get('date')?.touched">Indica la fecha de publicación del post.
            </p>
        </div>
        <button class="btn btn-outline-warning my-3 w-25 fw-bold" type="submit" [disabled]="form.invalid">Crear post</button>
    </form>
</section>


<!-- Este componente representa un formulario con los diferentes campos del modelo Post.Cuando pulsemos el botón enviar, el formulario debe mandar al servicio la información del nuevo Post para que se almacene junto a los demás, previamente de haberlo validado.-->

<!-- Validación de los campos -->
<!-- Diseño responsive -->
<!-- Se añadan los post al servicio -->
<!-- Las categorías la pille del servicio categories -->

<!-- FormComponent: formulario para crear un posts nuevo. 
(nuevo post)*

Campos: 
- Título post
- Texto post
- Excerpt
- Imagen
- Categoría (select)
- Fecha publicación

Botón crear: evento que al hacer click desencadene un método en el componente que haga una llamada a un método del servicio agregarPost(Post) que se encargue de recibir el formulario como objeto, y haga un push en el array de posts. 

Required: todos los campos son obligatorios. 

Testing: validar la url (y resto de campos). -->

